<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>全景视频</title>
    <meta name="description" content="全景视频">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="x5-fullscreen" content="true">
    <meta name="x5-orientation" content="portrait">
    <meta name="x5-page-mode" content="app">
    <meta name="full-screen" content="yes">
    <script src="./javascripts/aframe-v0.4.0.js"></script>
  </head>
  <body>
  <div id="msg"></div>
  <div id="vcontain" style="width: 100%; height: 300px">    
    <video id="myvideo" webkit-playsinline="true" x5-video-player-type="h5" x5-video-player-fullscreen="true"     
          playsinline="true" crossorigin="anonymous" autoplay="autoplay" controls="controls"
          src="./images/vr.mp4" width="100%" height="100%" muted="muted"></video>
  </div>
    <a-scene id="scene" stats>
      <a-entity material="shader: flat; src: #myvideo" geometry="primitive: sphere; radius: 100"
                scale="-1 1 1">
      </a-entity>
    </a-scene>
    <script type="text/javascript">
      var video = document.getElementById("myvideo");
      var msg = document.getElementById("msg");
      video.addEventListener("error", function(e){
        msg.innerHTML += "onerror:" + e.message;
      });
      video.addEventListener("canplay", function(e){
        msg.innerHTML += "oncanplay; ";
      });
      video.addEventListener("loadeddata", function(e){
        msg.innerHTML += "onloadeddata; ";
      });
      video.addEventListener("loadedmetadata", function(e){
        msg.innerHTML += "onloadedmetadata; ";
      });
      video.addEventListener("playing", function(e){
        msg.innerHTML += "onplaying; ";
        //document.getElementById("vcontain").style.display="none";
      });
      video.addEventListener("play", function(e){
        msg.innerHTML += "onplay; ";
      });

      var firstTimeupdate = 0;
      video.addEventListener("timeupdate", function(e){
        firstTimeupdate++;        
        if(firstTimeupdate==2){
          msg.innerHTML += "ontimeupdate; ";
          if (location.search.indexOf("debug")<0){
            document.getElementById("scene").style = 'position: absolute;top: 0px';
            msg.style.display="none";
          }
          
        }
      });

    </script>
  </body>
</html>
